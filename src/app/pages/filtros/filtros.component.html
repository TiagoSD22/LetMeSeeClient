<div class="main-container"
     fxLayout
     fxLayout.xs="column"
     fxLayoutAlign="center"
     fxLayoutGap="2px"
     fxLayoutGap.xs="0">

    <div class = "filtros-sidenav" fxLayout="column" fxFlex = 20%>
        <h5 style="align-items: left;text-align: left;font-synthesis: weight; font-size: 30px; font-size: 16px; color: lightgray;margin-left: 15px;margin-bottom: 18px;margin-top: 20px;">EDITAR</h5>
        <mat-accordion *ngIf = "menu" class="filtros-bar" [@slideInOut]>
            <mat-expansion-panel class="panel">
                <mat-expansion-panel-header class = "panel-header">
                    <mat-panel-title>
                        <img src="../../../assets/icons/filtros.png" class="filter-icon" style="top: 30px;">
                        <h5 class="filter-category-label">Filtros</h5>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent>
                    <mat-list role = "list" *ngIf = "menu" style="width: 100%;max-width: 100%;">
                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('negativo')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/negativo.svg" class="filter-icon">
                                Negativo
                            </h5>
                        </mat-list-item>
                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('limiar')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/limiar.png" class="filter-icon">
                                Limiar
                            </h5>
                        </mat-list-item>
                    </mat-list>
                </ng-template>
            </mat-expansion-panel>

            <mat-expansion-panel class="panel">
                <mat-expansion-panel-header class="panel-header">
                    <mat-panel-title>
                        <img src="../../../assets/icons/ajuste.svg" class="filter-icon" style="top: 30px;">
                        <h5 class="filter-category-label">Ajuste</h5>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent>
                    <mat-list role = "list" *ngIf = "menu" style="width: 100%;max-width: 100%;">
                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('ajusteRGB')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/colors.svg" class="filter-icon">
                                Ajuste RGB
                            </h5>
                        </mat-list-item>
                    </mat-list>
                </ng-template>
            </mat-expansion-panel>

            <mat-expansion-panel class="panel">
                <mat-expansion-panel-header class="panel-header">
                    <mat-panel-title>
                        <img src="../../../assets/icons/editar.svg" class="filter-icon" style="top: 30px;">
                        <h5 class="filter-category-label">Editar</h5>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent>
                    <mat-list role="list" *ngIf="menu" style="width: 100%;max-width: 100%;">
                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('espelhoH')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/espelho_horizontal.svg" class="filter-icon">
                                Espelho horizontal
                            </h5>
                        </mat-list-item>
                
                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('espelhoV')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/espelho_vertical.svg" class="filter-icon">
                                Espelho vertical
                            </h5>
                        </mat-list-item>

                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('girarH')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/rotacionar_horario.svg" class="filter-icon">
                                Girar horário
                            </h5>
                        </mat-list-item>

                        <mat-list-item style="margin-top: 0px;width: 100%;max-width: 100%;" (click)="toogle('girarAH')" role="listitem">
                            <h5 class="filter-label">
                                <img src="../../../assets/icons/rotacionar_antihorario.svg" class="filter-icon">
                                Girar anti-horário
                            </h5>
                        </mat-list-item>
                    </mat-list>
                </ng-template>
            </mat-expansion-panel>
        </mat-accordion>

        <mat-sidenav *ngIf = "negativoSidenavAberta" [@slideInOut] #negativoSidenav mode="side" class="filtro-param-sidenav">
            <h5 class="filter-label-title">Negativo</h5>
            <div class = 'negativo-sidenav'>
                <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('negativo')" matTooltip="Voltar">
                <button class="btn" mat-mini-fab color="primary" style="margin-top: 30px;" (click) = "negativo()" matTooltip="Aplicar" [disabled] = "carregando">
                    <i class="zmdi zmdi-check"></i>
                </button>
            </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "limiarSidenavAberta" [@slideInOut] #limiarSidenav mode="side" class="filtro-param-sidenav">
                <h5 class="filter-label-title">Limiar</h5>
                <div class = 'limiar-sidenav'>
                    <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('limiar')" matTooltip="Voltar">
                    <div class="div-align">
                        <label for = "limiar-value" class="label-slider">
                            Valor
                        </label>
                        <mat-slider
                            class="limiar-input"
                            [disabled]="false"
                            [invert]="false"
                            [max]="255"
                            [min]="0"
                            [step]="1"
                            [thumbLabel]="false"
                            [(ngModel)]="valorLimiar"
                            [vertical]="false"
                            (input) = "slideMudou('limiar',$event)"
                            id = "limiar-value">
                        </mat-slider>
                        <label *ngIf="valorLimiar <= 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            {{valorLimiar}}
                        </label>
                        <label *ngIf="valorLimiar > 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            +{{valorLimiar}}
                        </label>
                    </div>
                    <button class="btn" mat-mini-fab color="primary" style="margin-top: 2px;" (click) = "limiar()" matTooltip="Aplicar" [disabled] = "carregando">
                        <i class="zmdi zmdi-check"></i>
                    </button>
                </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "ajusteRGBSidenavAberta" [@slideInOut] #ajusteRGBSidenav mode="side" class="filtro-param-sidenav">
                <h5 class="filter-label-title">Ajuste RGB</h5>
                <div class = 'ajusteRGB-sidenav'>
                    <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('ajusteRGB')" matTooltip="Voltar">
                    <div class="div-align">
                        <label for = "canalR" class="label-slider">R</label>
                        <mat-slider
                            class="slider-vermelho"
                            [disabled]="false"
                            [invert]="false"
                            [max]="255"
                            [min]="-255"
                            [step]="1"
                            [thumbLabel]="false"
                            [(ngModel)]="valorR"
                            [vertical]="false"
                            id = "canalR"
                            (input) = "slideMudou('canalR',$event)">
                        </mat-slider>
                        <label *ngIf = "valorR <= 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            {{valorR}}
                        </label>
                        <label *ngIf = "valorR > 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            +{{valorR}}
                        </label>
                    </div>

                    <div class="div-align">
                        <label for = "canalG" class="label-slider">G</label>
                        <mat-slider
                            class="slider-verde"
                            [disabled]="false"
                            [invert]="false"
                            [max]="255"
                            [min]="-255"
                            [step]="1"
                            [thumbLabel]="false"
                            [(ngModel)]="valorG"
                            [vertical]="false"
                            id = "canalG"
                            (input) = "slideMudou('canalG',$event)">
                        </mat-slider>
                        <label *ngIf="valorG <= 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            {{valorG}}
                        </label>
                        <label *ngIf="valorG > 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            +{{valorG}}
                        </label>
                    </div>

                    <div class="div-align">
                        <label for = "canalB" class="label-slider">B</label>
                        <mat-slider
                            class="slider-azul"
                            [disabled]="false"
                            [invert]="false"
                            [max]="255"
                            [min]="-255"
                            [step]="1"
                            [thumbLabel]="false"
                            [(ngModel)]="valorB"
                            [vertical]="false"
                            id = "canalB"
                            (input) = "slideMudou('canalB',$event)">
                        </mat-slider>
                        <label *ngIf="valorB <= 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            {{valorB}}
                        </label>
                        <label *ngIf="valorB > 0" style="font-size: 14px;opacity: 0.7;color: lightgray;margin-left: 5px;margin-right: 5px;">
                            +{{valorB}}
                        </label>
                    </div>
                    
                    <button class="btn" mat-mini-fab color="primary" style="margin-top: 2px;" (click) = "ajusteRGB()" matTooltip="Aplicar" [disabled] = "carregando">
                        <i class="zmdi zmdi-check"></i>
                    </button>
                </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "robertsSidenavAberta" [@slideInOut] #robertsSidenav mode="side" class="filtro-param-sidenav">
            <h5 class="filter-label-title">Roberts Cross</h5>
            <div class = 'negativo-sidenav'>
                <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('roberts')" matTooltip="Voltar">
                <button class="btn" mat-mini-fab color="primary" style="margin-top: 30px;" (click) = "roberts()" matTooltip="Aplicar" [disabled] = "carregando">
                    <i class="zmdi zmdi-check"></i>
                </button>
            </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "espelhoHSidenavAberta" [@slideInOut] #espelhoHSidenav mode="side" class="filtro-param-sidenav">
                <h5 class="filter-label-title">Espelho horizontal</h5>
                <div class = 'negativo-sidenav'>
                    <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('espelhoH')" matTooltip="Voltar">
                    <button class="btn" mat-mini-fab color="primary" style="margin-top: 30px;" (click) = "espelhoH()" matTooltip="Aplicar" [disabled] = "carregando">
                        <i class="zmdi zmdi-check"></i>
                    </button>
                </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "espelhoVSidenavAberta" [@slideInOut] #espelhoVSidenav mode="side" class="filtro-param-sidenav">
                <h5 class="filter-label-title">Espelho vertical</h5>
                <div class = 'negativo-sidenav'>
                    <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('espelhoV')" matTooltip="Voltar">
                    <button class="btn" mat-mini-fab color="primary" style="margin-top: 30px;" (click) = "espelhoV()" matTooltip="Aplicar" [disabled] = "carregando">
                        <i class="zmdi zmdi-check"></i>
                    </button>
                </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "girarHSidenavAberta" [@slideInOut] #girarHSidenav mode="side" class="filtro-param-sidenav">
            <h5 class="filter-label-title">Girar horário</h5>
            <div class = 'negativo-sidenav'>
                <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('girarH')" matTooltip="Voltar">
                <button class="btn" mat-mini-fab color="primary" style="margin-top: 30px;" (click) = "girarH()" matTooltip="Aplicar" [disabled] = "carregando">
                    <i class="zmdi zmdi-check"></i>
                </button>
            </div>
        </mat-sidenav>

        <mat-sidenav *ngIf = "girarAHSidenavAberta" [@slideInOut] #girarAHSidenav mode="side" class="filtro-param-sidenav">
            <h5 class="filter-label-title">Girar anti-horário</h5>
            <div class = 'negativo-sidenav'>
                <img src="../../../assets/icons/voltar.svg" class="voltar-icon" (click) = "voltarMenu('girarAH')" matTooltip="Voltar">
                <button class="btn" mat-mini-fab color="primary" style="margin-top: 30px;" (click) = "girarAH()" matTooltip="Aplicar" [disabled] = "carregando">
                    <i class="zmdi zmdi-check"></i>
                </button>
            </div>
        </mat-sidenav>

    </div>

    <div fxFlex fxLayout="column">
        <div fxFlex = 96% fxLayout="row" fxLayoutAlign="center center" class="image-container" #imgContainer id = "img-container">
            <img cdkDragBoundary=".image-container" cdkDrag class="image" fxFlex
                 *ngIf = "imagem != undefined" 
                 src="data:image/{{imagem.tipo}};base64,{{imagem.conteudoBase64}}"
                 [style.width.px] = "imagem.largura * escala"
                 [style.height.px] = "imagem.altura * escala">  
            <mat-spinner *ngIf = "carregando" ></mat-spinner>
            
        </div>

        <div class="acoes-container" fxFlex>
            <div class="outer">
                <div class="inner" fxFlex fxLayout="row">
            <label style="margin-right: 100px;margin-left: 10px;cursor: pointer;margin-top: 16px;" 
                   matTooltip="Salvar" 
                   class="action-bt"
                   (click) = "salvarImagem()">
                <i class="zmdi zmdi-download zmdi-hc-lg"></i>
                SALVAR
            </label>

            <label style="margin-right: 20px;cursor: pointer;margin-top: 11px;height: 24px;" 
                   matTooltip="Tamanho original" 
                   class="action-bt"
                   (click) = "mostrarTamanhoOriginal()">
                <i class="material-icons">center_focus_strong</i>
            </label>
        
            <label style="margin-right: 20px;cursor: pointer;margin-top: 11px;height: 24px;" 
                   matTooltip="Ajustar para tela" 
                   class="action-bt"
                   (click) = "ajustarTela()">
                <i class="material-icons">aspect_ratio</i>
            </label>
        
            <label mat-mini-fab
                   style="margin-left: 20px; margin-right: 15px; cursor: pointer;" 
                   matTooltip="Zoom out"
                   (click) = "diminuirEscala()"
                   class="action-bt">
                <i class="zmdi zmdi-minus-circle zmdi-hc-lg"></i>
            </label>
        
            <mat-slider
                [disabled]="false"
                [invert]="false"
                [max]="4"
                [min]="0.10"
                [step]="0.01"
                [thumbLabel]="false"
                [(ngModel)]="escala"
                [vertical]="false"
                (input) = "slideMudou('escala',$event)">
            </mat-slider>
        
            <label  
                   style="cursor: pointer; margin-left: 15px;"
                   matTooltip="Zoom in"
                   (click) = "aumentarEscala()"
                   class="action-bt">
                <i class="zmdi zmdi-plus-circle zmdi-hc-lg"></i>
            </label>
        
            <label style="padding-left: 10px;padding-right: 50px;max-width: 100px;margin-top: 13px;">
                   {{escala * 100 | number:'1.0-0'}}%
            </label>
        
            <label *ngIf = "pilhaIndice != 0" 
                   style="cursor: pointer; right: 0px; margin-left: 20px;margin-right: 30px;"
                   matTooltip="Desfazer" 
                   (click) = "desfazer()"
                   class="action-bt">
                <i class="zmdi zmdi-undo zmdi-hc-lg"></i>
            </label>
            
            <label *ngIf = "pilhaIndice != pilha.length - 1" 
                   style="cursor: pointer;" 
                   matTooltip="Refazer"
                   (click) = "refazer()"
                   class="action-bt">
                <i class="zmdi zmdi-redo zmdi-hc-lg"></i>
            </label>
        </div>
    </div>
    </div>
</div>
